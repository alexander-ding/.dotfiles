"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[4665],{4665:(t,r,n)=>{n.r(r),n.d(r,{extractColors:()=>f});var e=n(347);let o;!function(t){t[t.ARRAY_BUFFER=0]="ARRAY_BUFFER",t[t.IMAGE_BITMAP=1]="IMAGE_BITMAP"}(o||(o={}));var i=n(93304),a=n.n(i);var s=n(124);const u=new function(){return a()('(()=>{var t={6877:(t,r,n)=>{var e=n(1702),o=n(8146),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},654:(t,r,n)=>{var e=n(1702),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can\'t set "+o(t)+" as a prototype")}},6529:(t,r,n)=>{var e=n(4516),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},4122:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},1800:(t,r,n)=>{"use strict";var e,o,i,a=n(4122),s=n(3),u=n(6833),c=n(1702),h=n(4516),f=n(2065),l=n(3185),p=n(8146),g=n(8492),b=n(2934),v=n(5608),y=n(4535),d=n(7826),m=n(789),w=n(9549),x=n(3122),_=n(3098),A=_.enforce,S=_.get,M=u.Int8Array,T=M&&M.prototype,R=u.Uint8ClampedArray,I=R&&R.prototype,E=M&&d(M),C=T&&d(T),O=Object.prototype,B=u.TypeError,j=w("toStringTag"),P=x("TYPED_ARRAY_TAG"),$="TypedArrayConstructor",G=a&&!!m&&"Opera"!==l(u.opera),F=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},D=function(t){var r=d(t);if(h(r)){var n=S(r);return n&&f(n,$)?n.TypedArrayConstructor:D(r)}},z=function(t){if(!h(t))return!1;var r=l(t);return f(H,r)||f(L,r)};for(e in H)(i=(o=u[e])&&o.prototype)?A(i).TypedArrayConstructor=o:G=!1;for(e in L)(i=(o=u[e])&&o.prototype)&&(A(i).TypedArrayConstructor=o);if((!G||!c(E)||E===Function.prototype)&&(E=function(){throw B("Incorrect invocation")},G))for(e in H)u[e]&&m(u[e],E);if((!G||!C||C===O)&&(C=E.prototype,G))for(e in H)u[e]&&m(u[e].prototype,C);if(G&&d(I)!==C&&m(I,C),s&&!f(C,j))for(e in F=!0,v(C,j,{configurable:!0,get:function(){return h(this)?this[P]:void 0}}),H)u[e]&&g(u[e],P,e);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:G,TYPED_ARRAY_TAG:F&&P,aTypedArray:function(t){if(z(t))return t;throw B("Target is not a typed array")},aTypedArrayConstructor:function(t){if(c(t)&&(!m||y(E,t)))return t;throw B(p(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,n,e){if(s){if(n)for(var o in H){var i=u[o];if(i&&f(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=r}catch(t){}}}C[t]&&!n||b(C,t,n?r:G&&T[t]||r,e)}},exportTypedArrayStaticMethod:function(t,r,n){var e,o;if(s){if(m){if(n)for(e in H)if((o=u[e])&&f(o,t))try{delete o[t]}catch(t){}if(E[t]&&!n)return;try{return b(E,t,n?r:G&&E[t]||r)}catch(t){}}for(e in H)!(o=u[e])||o[t]&&!n||b(o,t,r)}},getTypedArrayConstructor:D,isView:function(t){if(!h(t))return!1;var r=l(t);return"DataView"===r||f(H,r)||f(L,r)},isTypedArray:z,TypedArray:E,TypedArrayPrototype:C}},9404:(t,r,n)=>{var e=n(3479);t.exports=function(t,r){for(var n=0,o=e(r),i=new t(o);o>n;)i[n]=r[n++];return i}},7626:(t,r,n)=>{var e=n(3479);t.exports=function(t,r){for(var n=e(t),o=new r(n),i=0;i<n;i++)o[i]=t[n-i-1];return o}},8789:(t,r,n)=>{var e=n(3479),o=n(1132),i=RangeError;t.exports=function(t,r,n,a){var s=e(t),u=o(n),c=u<0?s+u:u;if(c>=s||c<0)throw i("Incorrect index");for(var h=new r(s),f=0;f<s;f++)h[f]=f===c?a:t[f];return h}},5451:(t,r,n)=>{var e=n(1375),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},3185:(t,r,n)=>{var e=n(4432),o=n(1702),i=n(5451),a=n(9549)("toStringTag"),s=Object,u="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var r,n,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,r){try{return t[r]}catch(t){}}(r=s(t),a))?n:u?i(r):"Object"==(e=i(r))&&o(r.callee)?"Arguments":e}},7560:(t,r,n)=>{var e=n(4897);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8492:(t,r,n)=>{var e=n(3),o=n(7925),i=n(5285);t.exports=e?function(t,r,n){return o.f(t,r,i(1,n))}:function(t,r,n){return t[r]=n,t}},5285:t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},5608:(t,r,n)=>{var e=n(7398),o=n(7925);t.exports=function(t,r,n){return n.get&&e(n.get,r,{getter:!0}),n.set&&e(n.set,r,{setter:!0}),o.f(t,r,n)}},2934:(t,r,n)=>{var e=n(1702),o=n(7925),i=n(7398),a=n(9817);t.exports=function(t,r,n,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:r;if(e(n)&&i(n,c,s),s.global)u?t[r]=n:a(r,n);else{try{s.unsafe?t[r]&&(u=!0):delete t[r]}catch(t){}u?t[r]=n:o.f(t,r,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},9817:(t,r,n)=>{var e=n(6833),o=Object.defineProperty;t.exports=function(t,r){try{o(e,t,{value:r,configurable:!0,writable:!0})}catch(n){e[t]=r}return r}},3:(t,r,n)=>{var e=n(4897);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},7211:t=>{var r="object"==typeof document&&document.all,n=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:n}},5268:(t,r,n)=>{var e=n(6833),o=n(4516),i=e.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},6807:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},1569:(t,r,n)=>{var e,o,i=n(6833),a=n(6807),s=i.process,u=i.Deno,c=s&&s.versions||u&&u.version,h=c&&c.v8;h&&(o=(e=h.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&a&&(!(e=a.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=a.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},4897:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},1703:(t,r,n)=>{var e=n(4897);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},7959:(t,r,n)=>{var e=n(1703),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},3745:(t,r,n)=>{var e=n(3),o=n(2065),i=Function.prototype,a=e&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,c=s&&(!e||e&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},1930:(t,r,n)=>{var e=n(1375),o=n(6877);t.exports=function(t,r,n){try{return e(o(Object.getOwnPropertyDescriptor(t,r)[n]))}catch(t){}}},1375:(t,r,n)=>{var e=n(1703),o=Function.prototype,i=o.call,a=e&&o.bind.bind(i,i);t.exports=e?a:function(t){return function(){return i.apply(t,arguments)}}},6300:(t,r,n)=>{var e=n(6833),o=n(1702),i=function(t){return o(t)?t:void 0};t.exports=function(t,r){return arguments.length<2?i(e[t]):e[t]&&e[t][r]}},9034:(t,r,n)=>{var e=n(6877),o=n(6133);t.exports=function(t,r){var n=t[r];return o(n)?void 0:e(n)}},6833:(t,r,n)=>{var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2065:(t,r,n)=>{var e=n(1375),o=n(2923),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,r){return i(o(t),r)}},2402:t=>{t.exports={}},3934:(t,r,n)=>{var e=n(3),o=n(4897),i=n(5268);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},210:(t,r,n)=>{var e=n(1375),o=n(1702),i=n(5456),a=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},3098:(t,r,n)=>{var e,o,i,a=n(9591),s=n(6833),u=n(4516),c=n(8492),h=n(2065),f=n(5456),l=n(9012),p=n(2402),g="Object already initialized",b=s.TypeError,v=s.WeakMap;if(a||f.state){var y=f.state||(f.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,e=function(t,r){if(y.has(t))throw b(g);return r.facade=t,y.set(t,r),r},o=function(t){return y.get(t)||{}},i=function(t){return y.has(t)}}else{var d=l("state");p[d]=!0,e=function(t,r){if(h(t,d))throw b(g);return r.facade=t,c(t,d,r),r},o=function(t){return h(t,d)?t[d]:{}},i=function(t){return h(t,d)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(r){var n;if(!u(r)||(n=o(r)).type!==t)throw b("Incompatible receiver, "+t+" required");return n}}}},1839:(t,r,n)=>{var e=n(3185);t.exports=function(t){var r=e(t);return"BigInt64Array"==r||"BigUint64Array"==r}},1702:(t,r,n)=>{var e=n(7211),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},6133:t=>{t.exports=function(t){return null==t}},4516:(t,r,n)=>{var e=n(1702),o=n(7211),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},9685:t=>{t.exports=!1},5170:(t,r,n)=>{var e=n(6300),o=n(1702),i=n(4535),a=n(490),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var r=e("Symbol");return o(r)&&i(r.prototype,s(t))}},3479:(t,r,n)=>{var e=n(9735);t.exports=function(t){return e(t.length)}},7398:(t,r,n)=>{var e=n(1375),o=n(4897),i=n(1702),a=n(2065),s=n(3),u=n(3745).CONFIGURABLE,c=n(210),h=n(3098),f=h.enforce,l=h.get,p=String,g=Object.defineProperty,b=e("".slice),v=e("".replace),y=e([].join),d=s&&!o((function(){return 8!==g((function(){}),"length",{value:8}).length})),m=String(String).split("String"),w=t.exports=function(t,r,n){"Symbol("===b(p(r),0,7)&&(r="["+v(p(r),/^Symbol\\(([^)]*)\\)/,"$1")+"]"),n&&n.getter&&(r="get "+r),n&&n.setter&&(r="set "+r),(!a(t,"name")||u&&t.name!==r)&&(s?g(t,"name",{value:r,configurable:!0}):t.name=r),d&&n&&a(n,"arity")&&t.length!==n.arity&&g(t,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var e=f(t);return a(e,"source")||(e.source=y(m,"string"==typeof r?r:"")),t};Function.prototype.toString=w((function(){return i(this)&&l(this).source||c(this)}),"toString")},8456:t=>{var r=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?n:r)(e)}},7925:(t,r,n)=>{var e=n(3),o=n(3934),i=n(4959),a=n(6529),s=n(6352),u=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,f="enumerable",l="configurable",p="writable";r.f=e?i?function(t,r,n){if(a(t),r=s(r),a(n),"function"==typeof t&&"prototype"===r&&"value"in n&&p in n&&!n.writable){var e=h(t,r);e&&e.writable&&(t[r]=n.value,n={configurable:l in n?n.configurable:e.configurable,enumerable:f in n?n.enumerable:e.enumerable,writable:!1})}return c(t,r,n)}:c:function(t,r,n){if(a(t),r=s(r),a(n),o)try{return c(t,r,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[r]=n.value),t}},7826:(t,r,n)=>{var e=n(2065),o=n(1702),i=n(2923),a=n(9012),s=n(7560),u=a("IE_PROTO"),c=Object,h=c.prototype;t.exports=s?c.getPrototypeOf:function(t){var r=i(t);if(e(r,u))return r[u];var n=r.constructor;return o(n)&&r instanceof n?n.prototype:r instanceof c?h:null}},4535:(t,r,n)=>{var e=n(1375);t.exports=e({}.isPrototypeOf)},789:(t,r,n)=>{var e=n(1930),o=n(6529),i=n(654);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,n={};try{(t=e(Object.prototype,"__proto__","set"))(n,[]),r=n instanceof Array}catch(t){}return function(n,e){return o(n),i(e),r?t(n,e):n.__proto__=e,n}}():void 0)},1546:(t,r,n)=>{var e=n(7959),o=n(1702),i=n(4516),a=TypeError;t.exports=function(t,r){var n,s;if("string"===r&&o(n=t.toString)&&!i(s=e(n,t)))return s;if(o(n=t.valueOf)&&!i(s=e(n,t)))return s;if("string"!==r&&o(n=t.toString)&&!i(s=e(n,t)))return s;throw a("Can\'t convert object to primitive value")}},5705:(t,r,n)=>{var e=n(6133),o=TypeError;t.exports=function(t){if(e(t))throw o("Can\'t call method on "+t);return t}},9012:(t,r,n)=>{var e=n(5085),o=n(3122),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5456:(t,r,n)=>{var e=n(6833),o=n(9817),i="__core-js_shared__",a=e[i]||o(i,{});t.exports=a},5085:(t,r,n)=>{var e=n(9685),o=n(5456);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.29.0",mode:e?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})},396:(t,r,n)=>{var e=n(1569),o=n(4897);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},89:(t,r,n)=>{var e=n(7145),o=TypeError;t.exports=function(t){var r=e(t,"number");if("number"==typeof r)throw o("Can\'t convert number to bigint");return BigInt(r)}},1132:(t,r,n)=>{var e=n(8456);t.exports=function(t){var r=+t;return r!=r||0===r?0:e(r)}},9735:(t,r,n)=>{var e=n(1132),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},2923:(t,r,n)=>{var e=n(5705),o=Object;t.exports=function(t){return o(e(t))}},7145:(t,r,n)=>{var e=n(7959),o=n(4516),i=n(5170),a=n(9034),s=n(1546),u=n(9549),c=TypeError,h=u("toPrimitive");t.exports=function(t,r){if(!o(t)||i(t))return t;var n,u=a(t,h);if(u){if(void 0===r&&(r="default"),n=e(u,t,r),!o(n)||i(n))return n;throw c("Can\'t convert object to primitive value")}return void 0===r&&(r="number"),s(t,r)}},6352:(t,r,n)=>{var e=n(7145),o=n(5170);t.exports=function(t){var r=e(t,"string");return o(r)?r:r+""}},4432:(t,r,n)=>{var e={};e[n(9549)("toStringTag")]="z",t.exports="[object z]"===String(e)},8146:t=>{var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},3122:(t,r,n)=>{var e=n(1375),o=0,i=Math.random(),a=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},490:(t,r,n)=>{var e=n(396);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4959:(t,r,n)=>{var e=n(3),o=n(4897);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},9591:(t,r,n)=>{var e=n(6833),o=n(1702),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},9549:(t,r,n)=>{var e=n(6833),o=n(5085),i=n(2065),a=n(3122),s=n(396),u=n(490),c=e.Symbol,h=o("wks"),f=u?c.for||c:c&&c.withoutSetter||a;t.exports=function(t){return i(h,t)||(h[t]=s&&i(c,t)?c[t]:f("Symbol."+t)),h[t]}},3876:(t,r,n)=>{"use strict";var e=n(7626),o=n(1800),i=o.aTypedArray,a=o.exportTypedArrayMethod,s=o.getTypedArrayConstructor;a("toReversed",(function(){return e(i(this),s(this))}))},5379:(t,r,n)=>{"use strict";var e=n(1800),o=n(1375),i=n(6877),a=n(9404),s=e.aTypedArray,u=e.getTypedArrayConstructor,c=e.exportTypedArrayMethod,h=o(e.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&i(t);var r=s(this),n=a(u(r),r);return h(n,t)}))},8754:(t,r,n)=>{"use strict";var e=n(8789),o=n(1800),i=n(1839),a=n(1132),s=n(89),u=o.aTypedArray,c=o.getTypedArrayConstructor,h=o.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,r){var n=u(this),o=a(t),h=i(n)?s(r):+r;return e(n,c(n),o,h)}}.with,!f)},4185:(t,r,n)=>{n(3876)},7327:(t,r,n)=>{n(5379)},8365:(t,r,n)=>{n(8754)}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";n(4185),n(7327),n(8365);let t;function r(t,r,n=1e-6){return Math.abs(t-r)<n}function e(t){return t.toString(16).padStart(2,"0")}function o(t){return`${parseFloat((100*t).toFixed(1))}%`}function i(t){t=t.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,(function(t,r,n,e){return r+r+n+n+e+e}));const r=/^#?(?<r>[a-f\\d]{2})(?<g>[a-f\\d]{2})(?<b>[a-f\\d]{2})(?<a>[a-f\\d]{2})?$/i.exec(t),n=r?.groups?.r,e=r?.groups?.g,o=r?.groups?.b,i=r?.groups?.a;if(void 0===n||void 0===e||void 0===o)throw new Error(`Invalid hex color code "${t}"`);return{r:n,g:e,b:o,a:i}}function a(t){const{a:r}=i(t);if(!r)return 1;return function(t,r,n){const e=t.toLocaleString("en",{useGrouping:!1,minimumFractionDigits:r,maximumFractionDigits:n});return Number(e)}(parseInt(r,16)/255,0,2)}!function(t){t[t.HEX=0]="HEX",t[t.HEXA=1]="HEXA",t[t.RGB=2]="RGB",t[t.RGBA=3]="RGBA",t[t.HSL=4]="HSL",t[t.HSLA=5]="HSLA"}(t||(t={}));function s(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function u({rgb:{r:t,g:r,b:n}}){return.2126*s(t/255)+.7152*s(r/255)+.0722*s(n/255)}function c(t,r){const n=u(t),e=u(r);return(Math.max(n,e)+.05)/(Math.min(n,e)+.05)}class h{constructor(t,r,n,e=1){this.rgb=t,this.hsl=r,this.hsv=n,this.a=e}static BLACK=h.fromRGB({r:0,g:0,b:0});static WHITE=h.fromRGB({r:255,g:255,b:255});static fromRGB(t,n){if(t.r<0||t.g<0||t.b<0||t.r>255||t.g>255||t.b>255||n&&n<0||n&&n>1)throw Error(`Invalid RGB color: ${JSON.stringify(t)}, alpha: ${n}`);const e=function({r:t,g:n,b:e}){const o=t/255,i=n/255,a=e/255,s=Math.max(o,i,a),u=Math.min(o,i,a),c=s-u;let h;const f=(s+u)/2,l=s;h=r(c,0)?0:r(l,o)?60*(0+(i-a)/c):r(l,i)?60*(2+(a-o)/c):60*(4+(o-i)/c),h%=360,h<0&&(h+=360);const p=0===f||1===f?0:(l-f)/Math.min(f,1-f);return{h:Math.round(h),s:p,l:f}}(t),o=function({r:t,g:n,b:e}){const o=t/255,i=n/255,a=e/255,s=Math.max(o,i,a),u=s-Math.min(o,i,a);let c;const h=s;c=r(u,0)?0:r(h,o)?60*(0+(i-a)/u):r(h,i)?60*(2+(a-o)/u):60*(4+(o-i)/u),c%=360,c<0&&(c+=360);const f=0===h?0:u/h;return{h:Math.round(c),s:f,v:h}}(t);return new h(t,e,o,n)}static fromHex(t,r){const n=function(t){const{r,g:n,b:e}=i(t);return{r:parseInt(r,16),g:parseInt(n,16),b:parseInt(e,16)}}(t),e=a(t);return h.fromRGB(n,r??e)}static fromHSV(t,r){const n=function({h:t,s:r,v:n}){const e=n*r,o=t/60,i=e*(1-Math.abs(o%2-1));let a;a=o>=0&&o<=1?[e,i,0]:o>1&&o<=2?[i,e,0]:o>2&&o<=3?[0,e,i]:o>3&&o<=4?[0,i,e]:o>4&&o<=5?[i,0,e]:o>5&&o<=6?[e,0,i]:[0,0,0];const s=n-e;return{r:Math.round(255*(a[0]+s)),g:Math.round(255*(a[1]+s)),b:Math.round(255*(a[2]+s))}}(t);return h.fromRGB(n,r)}static fromHSL(t,r){const n=function({h:t,s:r,l:n}){const e=(1-Math.abs(2*n-1))*r,o=t/60,i=e*(1-Math.abs(o%2-1));let a;a=o>=0&&o<=1?[e,i,0]:o>1&&o<=2?[i,e,0]:o>2&&o<=3?[0,e,i]:o>3&&o<=4?[0,i,e]:o>4&&o<=5?[i,0,e]:o>5&&o<=6?[e,0,i]:[0,0,0];const s=n-e/2;return{r:Math.round(255*(a[0]+s)),g:Math.round(255*(a[1]+s)),b:Math.round(255*(a[2]+s))}}(t);return h.fromRGB(n,r)}static fromCSS(t,r){const n=function(t,r){const n=t.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/);if(n){const[t,e,o,i]=n.slice(1),a=r??parseFloat(i);return h.fromRGB({r:parseInt(t,10),g:parseInt(e,10),b:parseInt(o,10)},Number.isNaN(a)?void 0:a)}return null}(t,r);if(n)return n;const e=function(t,r){const n=t.match(/^#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i);if(n){const t=n[1];return h.fromHex(t,r)}return null}(t,r);if(e)return e;const o=function(t,r){const n=t.match(/^hsla?\\((\\d+),\\s*(\\d+)%,\\s*(\\d+)%(?:,\\s*(\\d*(?:\\.\\d+)?))?\\)$/);if(n){const[t,e,o,i]=n.slice(1),a=r??parseFloat(i);return h.fromHSL({h:parseInt(t,10),s:parseInt(e,10)/100,l:parseInt(o,10)/100},Number.isNaN(a)?void 0:a)}return null}(t,r);if(o)return o;throw new Error(`Invalid or unsupported CSS color: ${t}`)}toCSS(r){switch(r){case t.HEX:return`#${e((n=this).rgb.r)}${e(n.rgb.g)}${e(n.rgb.b)}`;case t.HEXA:return function(t){return`#${e(t.rgb.r)}${e(t.rgb.g)}${e(t.rgb.b)}${e(Math.floor(255*t.a))}`}(this);case t.RGB:return function(t){return`rgb(${t.rgb.r}, ${t.rgb.g}, ${t.rgb.b})`}(this);case t.RGBA:return function(t){return`rgba(${t.rgb.r}, ${t.rgb.g}, ${t.rgb.b}, ${t.a})`}(this);case t.HSL:return function(t){const{h:r,s:n,l:e}=t.hsl;return`hsl(${r}, ${o(n)}, ${o(e)})`}(this);case t.HSLA:return function(t){const{h:r,s:n,l:e}=t.hsl;return`hsla(${r}, ${o(n)}, ${o(e)}, ${t.a})`}(this);default:throw new Error("Invalid or unsupported CSSColorFormat!")}var n}contrastAdjust(t,r=4.5){let n=h.BLACK;return"light"===t&&(n=h.WHITE),function(t,r,n){if(r!==h.BLACK&&r!==h.WHITE)throw new Error("Only supports contrast calculation between black and white.");let e=c(t,r);if(e>=n)return t;let o=t.hsv.v,i=r===h.WHITE?-.02:.02,a=Number.MAX_VALUE,s=null;for(let r=0;r<100&&a>.07&&o>=0&&o<=1;r++){o=Math.min(o+i,1),s=h.fromHSV({h:t.hsv.h,s:t.hsl.s,v:o}),e=c(s,h.WHITE);const r=Math.round(10*Math.abs(e-n))/10;r>a&&(i*=-.5),a=r}return null===s?t:s}(this,n,r)}toString(){return`${this.rgb.r},${this.rgb.g},${this.rgb.b},${this.a}`}stringify(){return JSON.stringify(this)}static parse(t){const{rgb:r,hsl:n,hsv:e,a:o}=JSON.parse(t);return new h(r,n,e,o)}}class f{constructor(t,r){this.color=t,this.population=r}static fromColor(t,r){return new f(t,r)}static fromRGB(t,r){return new f(h.fromRGB(t),r)}}class l{constructor(t,r=[]){this._comparator=t,this._data=r}swap(t,r){[this._data[t],this._data[r]]=[this._data[r],this._data[t]]}compare(t,r){return this._comparator(this._data[t],this._data[r])}bubbleUp(t){for(;t>0;){const r=t-1>>>1;if(this.compare(t,r)>=0)break;this.swap(t,r),t=r}}bubbleDown(t){const r=this._data.length;for(;;){const n=1+(t<<1),e=n+1;let o=t;if(n<r&&this.compare(n,o)<=0&&(o=n),e<r&&this.compare(e,o)<0&&(o=e),o===t)break;this.swap(o,t),t=o}}size(){return this._data.length}push(t){this._data.push(t),this.bubbleUp(this._data.length-1)}pop(){if(0===this._data.length)return null;this.swap(0,this._data.length-1);const t=this._data.pop();return this.bubbleDown(0),t}clone(){return new l(this._comparator,[...this._data])}*popAll(){for(;this._data.length>0;)yield this.pop()}}const p=31;function g(t){const r=(t>>>10&31)<<3,n=(t>>>5&31)<<3,e=(t>>>0&31)<<3;return h.fromRGB({r,g:n,b:e})}function b(t,r){return Math.round((t>>>3)/r)<<3}function v({rgb:{r:t,g:r,b:n}},{rgb:{r:e,g:o,b:i}}){return t*p*p+r*p+n-(e*p*p+o*p+i)}function y({rgb:{r:t,g:r,b:n}},{rgb:{r:e,g:o,b:i}}){return r*p*p+t*p+n-(o*p*p+e*p+i)}function d({rgb:{r:t,g:r,b:n}},{rgb:{r:e,g:o,b:i}}){return n*p*p+r*p+t-(i*p*p+o*p+e)}class m{constructor(t,r){this.min=t,this.max=r}size(){return this.max-this.min+1}clampTo(t){this.min=this.max=t}extendTo(t){this.min=Math.min(this.min,t),this.max=Math.max(this.max,t)}}class w{_population=0;_spanR=new m(0,0);_spanG=new m(0,0);_spanB=new m(0,0);constructor(t){this._swatches=t,this.fitBox()}getVolume(){return this._spanR.size()*this._spanG.size()*this._spanB.size()}getColorCount(){return this._swatches.length}getAverageColor(){let t=0,r=0,n=0,e=0;for(const{color:o,population:i}of this._swatches)e+=i,t+=i*o.rgb.r,r+=i*o.rgb.g,n+=i*o.rgb.b;const o=b(t,e),i=b(r,e),a=b(n,e);return f.fromRGB({r:o,g:i,b:a},e)}canSplit(){return this.getColorCount()>1}split(){if(!this.canSplit())throw new Error("Can not split a box with only 1 color");const t=this.findSplitPoint(),r=new w(this._swatches.slice(t+1,this._swatches.length));return this._swatches.splice(t+1),this.fitBox(),r}fitBox(){this._population=0;for(let t=0;t<this._swatches.length;t++){const{color:r,population:n}=this._swatches[t];this._population+=n,0===t?(this._spanR.clampTo(r.rgb.r),this._spanG.clampTo(r.rgb.g),this._spanB.clampTo(r.rgb.b)):(this._spanR.extendTo(r.rgb.r),this._spanG.extendTo(r.rgb.g),this._spanB.extendTo(r.rgb.b))}}findSplitPoint(){const t=this.getLongestDimensionComparator();this._swatches.sort(((r,n)=>t(r.color,n.color)));const r=Math.floor(this._population/2);for(let t=0,n=0;t<this._swatches.length;t++)if(n+=this._swatches[t].population,n>=r)return Math.min(this._swatches.length-1,t);return 0}getLongestDimensionComparator(){const t=this._spanR.size(),r=this._spanG.size(),n=this._spanB.size();return t>=r&&t>=n?v:r>=t&&r>=n?y:d}}class x{queue=new l(((t,r)=>r.getVolume()-t.getVolume()));_swatches=[];constructor(t){this._options=t}static fromPixels(t,r){return new x(r).quantize(t)}quantize(t){const r=new Array(32768).fill(0);let n=0,e=0,o=0;for(let e=t.next();!e.done;e=t.next()){n++;r[((i=e.value)>>>0&255)>>3<<10|(i>>>8&255)>>3<<5|(i>>>16&255)>>3]++}var i;for(let t=0;t<r.length;t++){const n=r[t];if(0===n)continue;const i=g(t);(void 0===this._options.filter||this._options.filter(i))&&(e++,o+=i.hsv.s,this._swatches.push(f.fromColor(i,n)))}return this._swatches.length>this._options.maxColors&&(this._swatches=this.quantizePixels(this._options.maxColors)),{swatches:this._swatches,totalPixels:n,totalColors:e,totalSaturationFromHSV:o}}quantizePixels(t){this.queue.push(new w(this._swatches)),this.splitBoxes(t);const r=Array.from(this.queue.popAll()).map((t=>t.getAverageColor())),n=this._options.filter;return void 0!==n?r.filter((t=>n(t.color))):r}splitBoxes(t){for(;this.queue.size()<t;){const t=this.queue.pop();if(null===t||!t.canSplit())return;this.queue.push(t.split()),this.queue.push(t)}}}function _(t,r){return t.reduce(((t,n)=>null!==t&&r(t)>r(n)?t:n),null)}function A(t,r,n){return(t-r)/(n-r)}function S(t){return(t%=360)<0?360+t:t}function M(t,r){const n=function(t){let r=Number.MAX_VALUE;for(const n of t)r=Math.min(r,n);r=-1*Math.abs(r);let n=0,e=360;for(const o of t){const t=S(o+r);t<180&&t>n&&(n=t),t>=180&&t<e&&(e=t)}return n=S(n-r),e=S(e-r),{hue1:Math.min(n,e),hue2:Math.max(n,e)}}(t);let e=0;return r>=n.hue1&&r<=n.hue2?A(S(r),n.hue1,n.hue2):(e=360-n.hue2,A(S(r+e),0,S(n.hue1+e)))}function T(t,r){const n=t.map((t=>t.color.hsv.h)),e=function(t){let r=0,n=0;for(const e of t)r+=Math.cos(e/180*Math.PI),n+=Math.sin(e/180*Math.PI);const e=r/t.length,o=n/t.length,i=180*Math.atan2(o,e)/Math.PI%360;return i>=0?i:360-Math.abs(i)}(n),o=M(n,e);return o>.4||o<.6?t.filter((t=>{return t.population/r>.02||(n=t.color.hsv.h,o=e,i=45,Math.min(Math.abs(o-n),360-Math.abs(o-n))<i);var n,o,i})):t}function R({color:{hsv:t},population:r},n,e){return(n?1:function(t){const r=function(t,r,n){const e=(n-r)/2+r-r,o=t-r,i=(e-Math.abs(e-o))/e;return Math.max(0,Math.min(i,1))}(t,30,80);return-1*Math.abs(2*r)}(t.h))+r/e+t.s*t.v}const I={min:.3,target:.5,max:.7},E={min:0,target:.26,max:.45},C={min:.55,target:.74,max:1},O={min:.35,target:1,max:1},B={min:0,target:.3,max:.4},j={saturation:.24,luminance:.52,population:.24},P={vibrantLight:{lightness:C,saturation:O,weights:j},vibrant:{lightness:I,saturation:O,weights:j},vibrantDark:{lightness:E,saturation:O,weights:j},mutedLight:{lightness:C,saturation:B,weights:j},muted:{lightness:I,saturation:B,weights:j},mutedDark:{lightness:E,saturation:B,weights:j}},$=f.fromRGB({r:83,g:83,b:83},1),G=f.fromRGB({r:83,g:83,b:83},1),F=f.fromRGB({r:127,g:127,b:127},1);function H(t,r){const{color:{hsl:n}}=t;return n.s>=r.saturation.min&&n.s<=r.saturation.max&&n.l>=r.lightness.min&&n.l<=r.lightness.max}function L(t,r,n){const{color:{hsl:e}}=t;let o=0,i=0,a=0;return r.weights.saturation>0&&(o=r.weights.saturation*(1-Math.abs(e.s-r.saturation.target))),r.weights.luminance>0&&(i=r.weights.luminance*(1-Math.abs(e.l-r.lightness.target))),r.weights.population>0&&(a=r.weights.population*(t.population/n)),o+i+a}function D(t,r,n,e,o=P){const i=new Set,a=_(t,(t=>t.population)),s={};for(const[r,n]of Object.entries(o)){const e=_(t.filter((t=>!i.has(t.color.toString()))).filter((t=>H(t,n))),(t=>L(t,n,a?.population||1)));null!==e&&(s[r]=e,i.add(e.color.toString()))}const u=function(t,r,n,e){const o=e/n;if(o<.1)return null;const i=t.filter((t=>t.population/r>=.0016)).filter((t=>!(o>=.2)||function({hsv:t}){return(t.v>.85||t.v<.15)&&t.s<.2||t.v<.15||t.s<.2||t.s<.2&&t.v<.4?0:(t.v+t.s)/2}(t.color)>=.3));if(0===i.length)return null;const a=T(i,r),s=function(t){return t.map((t=>t.color.hsv.h)).every((t=>t>=30&&t<=80))}(a);return _(a,(t=>R(t,s,r)))}(Object.values(s),r,n,e),c=u?f.fromColor(u.color.contrastAdjust("dark"),1):null,h=u?f.fromColor(u.color.contrastAdjust("light"),1):null;return{dominantSwatch:a,visRefSwatch:u||$,visRefDarkSwatch:c||G,visRefLightSwatch:h||F,visRefIsFallback:null===u,targetSwatches:s}}let z;!function(t){t[t.ARRAY_BUFFER=0]="ARRAY_BUFFER",t[t.IMAGE_BITMAP=1]="IMAGE_BITMAP"}(z||(z={}));const k=self;const U=t=>!function({hsl:t}){return t.l<=.05}(t)&&!function({hsl:t}){return t.l>=.95}(t)&&!function({hsl:t}){return t.h>=10&&t.h<=37&&t.s<=.82}(t)&&function({hsv:t}){return t.v>.2}(t);k.addEventListener("message",(t=>{const[r,n]=t.data,e=function(t){if(t.source===z.IMAGE_BITMAP){const r=t.data,n=new OffscreenCanvas(r.width,r.height).getContext("2d");return n.drawImage(r,0,0,r.width,r.height),n.getImageData(0,0,r.width,r.height).data.buffer}return t.data}(n),o=function*(t,r){const n=new Uint32Array(t),e=Math.ceil(n.length/r);for(let t=0;t<n.length;t+=e)yield n[t]}(e,2e4),i=x.fromPixels(o,{maxColors:16,filter:U}),{visRefSwatch:a,visRefDarkSwatch:s,visRefLightSwatch:u}=D(i.swatches,i.totalPixels,i.totalColors,i.totalSaturationFromHSV);k.postMessage([r,{colorRawJson:a.color.stringify(),colorLightJson:u.color.stringify(),colorDarkJson:s.color.stringify()}])}))})()})();\n',"Worker",void 0,void 0)};let c=0;async function h(t){const r=c++,n=new Promise(((t,n)=>{u.addEventListener("message",(n=>{const[o,i]=n.data;o===r&&t({colorRaw:e.Il.parse(i.colorRawJson),colorDark:e.Il.parse(i.colorDarkJson),colorLight:e.Il.parse(i.colorLightJson)})})),u.addEventListener("error",n)}));return u.postMessage([r,t],[t.data]),await n}async function f(t){let r;try{r=await async function(t){const r=new Image;return r.crossOrigin="anonymous",function(t){const r=0===t.indexOf("spotify:image:"),n=0===t.indexOf("spotify:mosaic:");return r||n}(t)?r.src=`https://local-image.spotify.com?uri=${encodeURIComponent(t)}`:r.src=t,await r.decode(),r}(t)}catch(t){return Promise.resolve(s.ab)}const n=r.naturalWidth,e=r.naturalHeight;if("createImageBitmap"in window&&"OffscreenCanvas"in window){const t=await window.createImageBitmap(r);return await async function(t){return await h({source:o.IMAGE_BITMAP,data:t})}(t)}const i=document.createElement("canvas"),a=i.getContext("2d");return i.width=n,i.height=e,a.drawImage(r,0,0,n,e),await async function(t){return await h({source:o.ARRAY_BUFFER,data:t.data.buffer})}(a.getImageData(0,0,n,e))}}}]);
//# sourceMappingURL=4665.js.map