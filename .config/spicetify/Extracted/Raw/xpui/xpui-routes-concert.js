"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7288],{52101:(e,t,s)=>{s.d(t,{Z:()=>N});var a=s(59496),n=s(68045),r=s(34194),i=s(70883),c=s(18486),o=s(22005),l=s(76010),d=s(10271);const h="MUiWCNTfb6FcSwVPvQ1V",m="UAk3bMhekwJTV_wIyfsT",g="X9w6LPfKsZHMCs38sVIQ",u="NXn5KjeUOjLGlAfS1Gao",x="N0wgFMDDvCiby4QB5kLJ",j="nloNe2BLRHjz9dxlwfLU",p="JzXND83mXvcEuntCNR34",v="GR08E4L_rOGljyQQX30R";var y=s(4637);const N=(0,a.memo)((e=>{const{concert:t,isVirtual:s,onClick:a}=e,{venue:N,location:f}=t,k=t.artists[0],C=(0,l.CH)(t.startDate.localDate);return(0,y.jsxs)(i.Link,{to:`/concert/${t.id}`,className:h,onClick:a,children:[k.imageUri&&(0,y.jsx)(c.Z,{children:(0,y.jsx)("div",{role:"img",className:v,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${k.imageUri})`}})}),(0,y.jsx)("time",{className:m,dateTime:t.startDate.localDate,children:(0,y.jsx)(n.D,{as:"h5",variant:"mestoBold",children:(0,l.jx)(C)})}),(0,y.jsxs)("div",{className:g,dir:"auto",children:[(0,y.jsxs)(n.D,{as:"h2",className:p,variant:"mesto",children:[(0,o.FO)(C)," • ",(0,l.hK)(C)]}),(0,y.jsx)(n.D,{as:"h2",variant:"cello",weight:"bold",className:u,children:(0,d.ij)(t)}),(0,y.jsx)("div",{className:x,children:(0,y.jsx)(n.D,{as:"h2",className:j,variant:"mesto","data-testid":"location-name",children:s?N:[N,f].join(r.ag.getSeparator())})})]})]})}))},60314:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ze});var a=s(75387),n=s(90641),r=s(92053),i=s(34194),c=s(88645),o=s(21182),l=s(52542);const d=e=>{const[t,{username:s,concertUri:a}]=e.queryKey;return(async(e,t)=>(await(0,l.checkConcertInCollection)(o.b.getInstance(),e,t)).body?.found[0])(s,a)};var h=s(59673),m=s(59496),g=s(68045),u=s(43349),x=s(60918),j=s(4809),p=s(5748),v=s(49188),y=s(97054),N=s(74684),f=s(81734),k=s(16988),C=s(84875),b=s.n(C),D=s(91677),_=s(89553),S=s(20505),w=s(389),L=s(83016),I=s(10707),P=s(84093),A=s(89662),U=s(99194),T=s(53695),K=s(28999),F=s(4637);const E=m.memo((function({uri:e}){const{spec:t}=(0,U.T)(e);return(0,F.jsx)(A.ZP,{value:"concert",children:(0,F.jsxs)(P.v,{children:[(0,F.jsxs)(T.q,{children:[(0,F.jsx)(K.Jx,{spec:t,uri:e,displayText:i.ag.get("context-menu.copy-concert-link")}),(0,F.jsx)(K.W2,{spec:t,uri:e})]}),(0,F.jsx)(K.h$,{spec:t,uri:e})]})})}));var V=s(70883),z=s(10022),R=s(47871),$=s(58491),M=s(91012),O=s(95679),Y=s(3444),Z=s(76010);const H="rvw6x7R5AiAT48dSkFl9",Q="JRuVlk6wpKk6ok7zuW6l",W="YpfopxY2udneDY34uzRN",G="KI_0F1jtTR5tWgl7gZ1E",J="gKtc3TdowDTXBaVESi1D",X="V8TIr8yJq4tYZfPEzm12",q="VvL91cIRcCi1hJh0K845",B="vKcnOO1GNYoLKHg4T4lK",ee="LdW0YNvo_Y77hgqhL4zY",te="cTkykhjfHxkEGKbxSxXw",se="XgeTnLs82tTjczDR6oKn",ae="P3fE7wn6Tqnibn3gljKV",ne="A8LG_5Dvp7IiXDtdR571",re="OVY7plwgy_AKAzhgoCAF",ie="O0PSSw8ttrMn9lzq_L16",ce="D_ffrfn62aOgZKOFfZVr",oe="OH4mOZCual2ejIodzIkL",le="se_ixDV6hBf7lve861oU",de="YDAJHPP5lDmg71SdvJZC",he="lKQxSRsi8KcoYx5D7mjh",me="LUMel_X4gQK0J1i6X0sC",ge="s1jEHgfOLzeY3WugmaoT",ue=(0,m.memo)((e=>{const{concert:t,onClick:s}=e,{category:a,venue:n,location:r,lat:i,lon:c}=t;if("ONLINE"===a)return(0,F.jsx)(g.D,{as:"h3",variant:"canon",children:n});const o=new URL("https://maps.google.com/");return o.searchParams.set("q",`${n},${r}`),o.searchParams.set("ll",`${i},${c}`),(0,F.jsx)(V.default,{to:o.href,target:"_blank",onClick:()=>s(o.href),children:(0,F.jsxs)(g.D,{as:"h3",variant:"canon",children:[n,", ",r]})})})),xe=(0,m.memo)((e=>{const{concert:t,ticketAvailabilityTranslated:s,entitySpec:a,isConcertSaved:n,isAnonymous:r,onInterestedClick:c}=e,d=(0,m.useMemo)((()=>a.ticketProviderListFactory()),[a]),h=(0,k.$P)(),u=(0,k.Wi)(d),x=(0,Z.CH)(t.date),j=`spotify:concert:${t.id}`,p=(0,z.o)(),[v,y]=(0,m.useState)(n),N=(0,L.W6)(R.tp);if(0===t.ticketers.length)return null;if((0,Z.OF)(t.date))return(0,F.jsxs)("div",{className:ee,children:[(0,F.jsx)(g.D,{as:"h3",variant:"canon",children:i.ag.get("concert_event_ended")}),(0,F.jsx)(g.D,{variant:"ballad",children:(0,F.jsx)(V.default,{to:"spotify:concerts",children:i.ag.get("concert_past_message")})})]});return(0,F.jsxs)("div",{className:ee,ref:u,children:[(0,F.jsx)(g.D,{as:"h3",variant:"canon",children:(0,F.jsx)(ue,{concert:t,onClick:e=>{const t=a.venueMapLinkFactory().hitNavigateToExternalUri({destination:e});h.logInteraction(t)}})}),(0,F.jsxs)(g.D,{as:"h3",variant:"mesto",className:de,children:[(0,Z.xE)(x)," • ",(0,Z.hK)(x)]}),(0,F.jsx)(g.D,{as:"h3",className:B,variant:"mesto",children:(f=t.ticketers,0===f.length?null:1===f.length?i.ag.get("concert.header.tickets_from_1",f[0].partnerDisplayName):2===f.length?i.ag.get("concert.header.tickets_from_2",f[0].partnerDisplayName,f[1].partnerDisplayName):3===f.length?i.ag.get("concert.header.tickets_from_3",f[0].partnerDisplayName,f[1].partnerDisplayName,f[2].partnerDisplayName):i.ag.get("concert.header.tickets_from_4",f[0].partnerDisplayName,f[1].partnerDisplayName,f[2].partnerDisplayName,f.length-3))}),s&&(0,F.jsx)(g.D,{as:"h3",className:B,variant:"mesto",children:s}),(0,F.jsxs)("div",{className:Q,children:[!r&&N&&(0,F.jsx)($._,{label:i.ag.get("concerts_interested_tooltip"),placement:"top-end",children:(0,F.jsx)(D.P,{buttonSize:"sm",iconLeading:v?_.N:S.S,className:b()(me,{[H]:v}),onClick:()=>{v?((0,l.unsaveConcert)(o.b.getInstance(),t.id),c(!0,i.ag.get("concerts_removed-from-your-saved-events"))):((0,l.saveConcert)(o.b.getInstance(),t.id),c(!0,i.ag.get("concerts_added-to-your-saved-events"))),y(!v)},children:i.ag.get("concerts_interested")})}),(0,F.jsx)(M.yj,{menu:(0,F.jsx)(E,{uri:j}),onShow:()=>{const e=a.contextMenuButtonFactory().hitUiReveal();h.logInteraction(e)},children:(0,F.jsx)(I.z,{size:32})})]}),(0,F.jsx)(g.D.h3,{variant:"canon",children:i.ag.get("concert.header.available_tickets_from")}),(0,F.jsx)("div",{className:te,children:t.ticketers.map(((e,t)=>(0,F.jsxs)(V.default,{to:e.url,className:se,onClick:()=>{const s=d.ticketProviderCellFactory({identifier:e.partnerDisplayName,position:t}).hitNavigateToExternalUri({destination:e.url});h.logInteraction(s),p({targetUri:j,intent:"find-concert",type:"click"})},children:[(0,F.jsx)("div",{className:ae,children:(0,F.jsx)(Y.Ee,{loading:"eager",srcSet:e.imageURL,src:e.imageURL,height:"100%",width:"100%",children:(0,F.jsx)(w.i,{className:ne,iconSize:24})})}),(0,F.jsxs)("div",{className:ie,children:[(0,F.jsx)(g.D.span,{children:e.partnerDisplayName}),(0,F.jsx)(O.h,{className:re,iconSize:24})]})]},e.url)))})]});var f}));var je=s(17040),pe=s(32674),ve=s(2430),ye=s(18486);const Ne="bnxKFmECExdcmyBXx9f_",fe="UrPgHWUndGwAWPfONuwd",ke="pF2W693VDIpPdVTVCsDg",Ce="YGVuy3Qzaam0CJPc_s4K",be="r5Kj2xQVLHK0hf_J00US",De="qCN2f5PHVrzAPLvQ0lNc",_e=(0,m.memo)((e=>{const{entity:t,headliner:s,onClick:a}=e,{imageUri:n,name:r,uri:c}=t;return(0,F.jsxs)(V.Link,{to:c,className:Ne,onClick:a,children:[n?(0,F.jsx)(ye.Z,{children:(0,F.jsx)("div",{"data-testid":"image-container",className:De,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.5) 50.52%, rgba(18, 18, 18, 0.7) 100%), url(${n})`}})}):null,(0,F.jsxs)("div",{className:fe,children:[s&&(0,F.jsx)("div",{className:Ce,children:(0,F.jsx)(g.D,{as:"h4",variant:"mestoBold",className:be,weight:"bold",children:i.ag.get("concert.label.headliner")})}),(0,F.jsx)(g.D,{as:"h2",variant:"alto",className:ke,children:r})]})]})})),Se=_e,we=(0,m.memo)((e=>{const{artist:t,albums:s,position:a,lineupArtistsSpec:n}=e,r=(0,m.useMemo)((()=>n.artistRowFactory({position:a,uri:t.uri})),[n,a,t.uri]),c=(0,k.$P)(),o=0===a,l=`${(0,ve.GJ)(t.id)}:discography`;return(0,F.jsx)(A.ZP,{value:"headered-grid",index:a,children:(0,F.jsx)(k.Nh,{spec:r||null,children:(0,F.jsx)(pe.P,{title:o?i.ag.get("concert_lineup"):"",total:s.length+2,seeAllUri:l,seeAllLabel:i.ag.get("artist-page.show-discography"),onClickShelfSeeAll:()=>{const e=r.seeDiscographyLinkFactory().hitUiNavigate({destination:l});c.logInteraction(e)},children:[(0,F.jsx)(Se,{entity:t,headliner:o,onClick:()=>{const e=r.artistCardFactory().hitUiNavigate({destination:t.uri});c.logInteraction(e)}},`ConcertArtistCard-${t.id}`),null,...s.map(((e,s)=>(0,F.jsx)(je.r,{index:s,artists:[{uri:t.uri,name:t.name}],images:[{url:e.imageUri,width:100,height:100}],name:e.name,uri:e.uri,sharingInfo:null},e.uri)))]})})},t.uri)})),Le=(0,m.memo)((e=>{const{albums:t,artists:s,entitySpec:a}=e,n=(0,m.useMemo)((()=>a.lineupArtistsFactory()),[a]),r=(0,k.Wi)(n),i=(0,m.useMemo)((()=>{const e={};return t.forEach((t=>{const s=t.artistName;e[s]?e[s].push(t):e[s]=[t]})),e}),[t]);return(0,F.jsx)("div",{className:ce,ref:r,"data-testid":"concert-lineup",children:s.map(((e,t)=>(0,F.jsx)(we,{artist:e,albums:i[e.name]||[],position:t,lineupArtistsSpec:n},e.uri)))})})),Ie="y4xsX4QR_wfM40vOhsQ4",Pe="TPdGbM0PhSqxmhkxP9n2",Ae="y33j8HV43EGq3BPkZrLA",Ue=(0,m.memo)((e=>(0,F.jsxs)(V.Link,{to:"spotify:concerts",className:Ie,onClick:e.onClick,children:[(0,F.jsx)(ye.Z,{children:(0,F.jsx)("div",{className:Ae,style:{backgroundImage:"linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.5) 50.52%, rgba(18, 18, 18, 0.7) 100%), url(https://concerts.spotifycdn.com/ConcertHubCard.png)"}})}),(0,F.jsx)("div",{className:Pe,children:(0,F.jsx)(g.D,{as:"h2",variant:"canon",children:i.ag.get("concerts_browse_more")})})]})));var Te=s(52101);const Ke=(0,m.memo)((e=>{const t=(0,m.useMemo)((()=>e.entitySpec.recommendedConcertsFactory()),[e.entitySpec]),s=(0,k.$P)(),a=(0,k.Wi)(t),n=e.upcomingConcerts;if(!n||n.length<1)return null;const r=n.map(((e,a)=>{const n=`spotify:concert:${e.concert.id}`;return(0,F.jsx)(Te.Z,{concert:e.concert,onClick:()=>{const e=t.concertCardFactory({position:a,uri:n}).hitUiNavigate({destination:n});s.logInteraction(e)}},e.concert.id)}));return(0,F.jsx)("div",{className:le,ref:a,"data-testid":"concert-recommendations",children:(0,F.jsx)(A.ZP,{value:"headered-grid",children:(0,F.jsxs)(pe.P,{title:i.ag.get("concerts_more_events"),total:n.length+1,className:he,showSeeAll:!0,seeAllUri:"spotify:concerts",seeAllLabel:i.ag.get("view.see-all"),children:[(0,F.jsx)(Ue,{onClick:()=>{const e=t.browseCardFactory().hitUiNavigate({destination:"spotify:concerts"});s.logInteraction(e)}}),r]})})})}));var Fe=s(10271);const Ee=(0,m.memo)((e=>{const{data:t,isAnonymous:s,isConcertSaved:a}=e,{artists:n,albums:r,upcomingConcerts:i}=t,c=t.concert.concert,[o,l]=(0,m.useState)(!1),[d,h]=(0,m.useState)(""),{spec:C}=(0,k.fU)(x.createDesktopConcertEntityEventFactory,{data:{identifier:c.id,uri:`spotify:concert:${c.id}`}});return(0,f.Y)(t.color),(0,F.jsxs)("section",{className:X,children:[(0,F.jsx)(p.$,{children:(0,Fe.Yl)(c)}),(0,F.jsxs)(v.gF,{backgroundImages:[{url:t.headerImageUri,width:100,height:100}],backgroundColor:t.color,children:[(0,F.jsxs)(v.sP,{children:[(0,F.jsx)(v.T0,{children:(0,F.jsx)("div",{className:W,children:(0,F.jsx)(g.D,{as:"h3",variant:"canon",className:G,children:(0,Z.jx)((0,Z.CH)(c.date))})})}),(0,F.jsx)(v.xd,{children:(0,Fe.Yl)(c)})]}),(0,F.jsx)(y.W,{children:(0,F.jsx)("div",{className:oe,children:(0,F.jsx)(N.i,{text:(0,Fe.Yl)(c)})})})]}),(0,F.jsxs)("div",{className:J,children:[(0,F.jsx)(j.I,{backgroundColor:t.color}),(0,F.jsxs)("div",{className:q,children:[(0,F.jsx)(xe,{onInterestedClick:(e,t)=>{l(e),h(t),setTimeout((()=>l(!1)),1e4)},concert:c,ticketAvailabilityTranslated:t.ticketAvailabilityTranslated,entitySpec:C,isAnonymous:s,isConcertSaved:a}),(0,F.jsx)(Le,{artists:n,albums:r,entitySpec:C}),(0,F.jsx)(Ke,{upcomingConcerts:i,entitySpec:C})]})]}),o&&(0,F.jsx)(u.A9,{colorSet:"invertedLight",className:ge,children:d})]})})),Ve=async e=>{const[t,s]=e.queryKey;return(await(0,l.getConcert)(o.b.getInstance(),s)).body},ze=()=>{const{concertId:e=""}=(0,r.UO)(),{data:t,isLoading:s}=(0,a.useQuery)(["concert",e],Ve,{staleTime:6e5}),o=(e=>{const t=["concertInCollection",e];return(0,a.useQuery)(t,d,{keepPreviousData:!1,retry:!1})})({username:(0,n.v9)(h.n5),concertUri:`spotify:concert:${e}`})?.data||!1,{isAnonymous:l}=(0,n.v9)(h.Gg);return s?(0,F.jsx)(c.h,{hasError:!1,errorMessage:""}):t?(0,F.jsx)(Ee,{data:t,isAnonymous:l,isConcertSaved:o}):(0,F.jsx)(c.h,{hasError:!0,errorMessage:i.ag.get("concert.error.concert_not_found_title")})}}}]);
//# sourceMappingURL=xpui-routes-concert.js.map